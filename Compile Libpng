To compile libpng zlib must first be compiled
Before running make you must configure zlib to use the sh3eb-elf compiler run
CC=sh3eb-elf-gcc CFLAGS="-m4a-nofpu -mb -O2 -flto -mhitachi -Wall -L$HOME/Documents/libfxcg/lib -nostartfiles -T$HOME/Documents/libfxcg/toolchain/prizm.x -Wl,-static -Wl,-gc-sections -I$HOME/Documents/libfxcg/include" LDFLAGS="-L$HOME/Documents/libfxcg/lib -nostartfiles -T$HOME/Documents/libfxcg/toolchain/prizm.x -Wl,-static -Wl,-gc-sections -Wl,-O2 -O2 -flto"  ./configure --static
Please edit the paths before running this command to refelect where you have libfxcg installed
Also you may be thinking to yourself that the CFLAGS contain stuff that should be in LDFLAGS. The reaason this is in CFLAGS is because the ./configure script sucks and does not take into account LDFLAGS when doing its test.
Now that your have setup zlib you can now compile it using make so simply type make and you are done it will compile without any errors
So you must configure libpng run
./configure --host=sh3eb-elf --build=x86_64-unknown-linux-gnu CPPFLAGS="-DPNG_NO_FLOATING_ARITHMETIC -DPNG_SETJMP_NOT_SUPPORTED -I$HOME/Documents/libfxcg/include -I$HOME/Documents/libfxcg/examples/zlib-1.2.8/" CFLAGS="-m4a-nofpu -mb -O2 -flto -mhitachi -Wall -I$HOME/Documents/libfxcg/include -I$HOME/Documents/libfxcg/examples/zlib-1.2.8/" LDFLAGS="-L$HOME/Documents/libfxcg/lib -L$HOME/Documents/libfxcg/examples/zlib-1.2.8/ -nostartfiles -T$HOME/Documents/libfxcg/toolchain/prizm.x -Wl,-static -Wl,-gc-sections -Wl,-O2 -O2 -flto" --with-gnu-ld
Please change --build and the paths again
And again just run make and you are done
Note that make may stop with an error. This may be okay if the library is already built it may just be trying to build some examples.
If you check in the folder named .libs and see libpng16.a you are done. If not that means the error matters and needs to be addressed.
